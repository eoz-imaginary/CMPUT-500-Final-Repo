<html><head><link href="details.css" rel="stylesheet" /><script type="text/javascript" src="search-details.js"></script><title>Proverbot Detailed Report for Fermat.v</title></head><body onload="init()"><pre><code class="plaincommand">(* This program is free software; you can redistribute it and/or      *)
(* modify it under the terms of the GNU Lesser General Public License *)
(* as published by the Free Software Foundation; either version 2.1   *)
(* of the License, or (at your option) any later version.             *)
(*                                                                    *)
(* This program is distributed in the hope that it will be useful,    *)
(* but WITHOUT ANY WARRANTY; without even the implied warranty of     *)
(* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the      *)
(* GNU General Public License for more details.                       *)
(*                                                                    *)
(* You should have received a copy of the GNU Lesser General Public   *)
(* License along with this program; if not, write to the Free         *)
(* Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA *)
(* 02110-1301 USA                                                     *)


Require Import Arith.</code><br /><code class="plaincommand">Require Export Divides.</code><br /><code class="plaincommand">Require Export Binomials.</code><br /><button class="collapsible okay" onmouseover="hoverLemma(&quot;FermatZddiv_fact&quot;)" onmouseout="unhoverLemma(&quot;FermatZddiv_fact&quot;)"><code class="buttontext">Lemma div_fact :
 forall p k : nat,
 prime p -&gt;
 0 &lt; k -&gt;
 divides p (factorial k) -&gt; exists j : nat, 0 &lt; j /\ j &lt;= k /\ divides p j.</code></button><div class="region"><div class="predicted"><span data-subgoals="((&quot;forall (p k : nat) (_ : prime p) (_ : lt O k)
  (_ : divides p (factorial k)),
ex (fun j : nat => and (lt O j) (and (le j k) (divides p j)))&quot;, (&quot;&quot;)))" id="command-1-0" onmouseover="hoverTactic(&quot;1-0&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">Proof.</code><br /></span><span data-subgoals="((&quot;forall (p k : nat) (_ : prime p) (_ : lt O k)
  (_ : divides p (factorial k)),
ex (fun j : nat => and (lt O j) (and (le j k) (divides p j)))&quot;, (&quot;&quot;)))" id="command-1-1" onmouseover="hoverTactic(&quot;1-1&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">Admitted.</code><br /></span></div><div class="original"><span data-subgoals="((&quot;forall (p k : nat) (_ : prime p) (_ : lt O k)
  (_ : divides p (factorial k)),
ex (fun j : nat => and (lt O j) (and (le j k) (divides p j)))&quot;, (&quot;&quot;)))" id="command-1-0" onmouseover="hoverTactic(&quot;1-0&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">Proof.</code><br /></span><span data-subgoals="((&quot;forall (p k : nat) (_ : prime p) (_ : lt O k)
  (_ : divides p (factorial k)),
ex (fun j : nat => and (lt O j) (and (le j k) (divides p j)))&quot;, (&quot;&quot;)))" id="command-1-1" onmouseover="hoverTactic(&quot;1-1&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">simple induction k.</code><br /></span><span data-subgoals="((&quot;forall (_ : prime p) (_ : lt O O) (_ : divides p (factorial O)),
ex (fun j : nat => and (lt O j) (and (le j O) (divides p j)))&quot;, (&quot;p,k : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (_ : prime p) (_ : lt O n) (_ : divides p (factorial n)),
       ex (fun j : nat => and (lt O j) (and (le j n) (divides p j))))
  (_ : prime p) (_ : lt O (S n)) (_ : divides p (factorial (S n))),
ex (fun j : nat => and (lt O j) (and (le j (S n)) (divides p j)))&quot;, (&quot;p,k : nat&quot;)))" id="command-1-2" onmouseover="hoverTactic(&quot;1-2&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">simpl in |- *.</code><br /></span><span data-subgoals="((&quot;forall (_ : prime p) (_ : lt O O) (_ : divides p (S O)),
ex (fun j : nat => and (lt O j) (and (le j O) (divides p j)))&quot;, (&quot;p,k : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (_ : prime p) (_ : lt O n) (_ : divides p (factorial n)),
       ex (fun j : nat => and (lt O j) (and (le j n) (divides p j))))
  (_ : prime p) (_ : lt O (S n)) (_ : divides p (factorial (S n))),
ex (fun j : nat => and (lt O j) (and (le j (S n)) (divides p j)))&quot;, (&quot;p,k : nat&quot;)))" id="command-1-3" onmouseover="hoverTactic(&quot;1-3&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros H' H'0.</code><br /></span><span data-subgoals="((&quot;forall _ : divides p (S O),
ex (fun j : nat => and (lt O j) (and (le j O) (divides p j)))&quot;, (&quot;H'0 : lt O O&quot;,&quot;H' : prime p&quot;,&quot;p,k : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (_ : prime p) (_ : lt O n) (_ : divides p (factorial n)),
       ex (fun j : nat => and (lt O j) (and (le j n) (divides p j))))
  (_ : prime p) (_ : lt O (S n)) (_ : divides p (factorial (S n))),
ex (fun j : nat => and (lt O j) (and (le j (S n)) (divides p j)))&quot;, (&quot;p,k : nat&quot;)))" id="command-1-4" onmouseover="hoverTactic(&quot;1-4&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">absurd (0 &lt; 0).</code><br /></span><span data-subgoals="((&quot;not (lt O O)&quot;, (&quot;H'0 : lt O O&quot;,&quot;H' : prime p&quot;,&quot;p,k : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (_ : prime p) (_ : lt O n) (_ : divides p (factorial n)),
       ex (fun j : nat => and (lt O j) (and (le j n) (divides p j))))
  (_ : prime p) (_ : lt O (S n)) (_ : divides p (factorial (S n))),
ex (fun j : nat => and (lt O j) (and (le j (S n)) (divides p j)))&quot;, (&quot;p,k : nat&quot;)))" id="command-1-5" onmouseover="hoverTactic(&quot;1-5&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;lt O O&quot;, (&quot;H'0 : lt O O&quot;,&quot;H' : prime p&quot;,&quot;p,k : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (_ : prime p) (_ : lt O n) (_ : divides p (factorial n)),
       ex (fun j : nat => and (lt O j) (and (le j n) (divides p j))))
  (_ : prime p) (_ : lt O (S n)) (_ : divides p (factorial (S n))),
ex (fun j : nat => and (lt O j) (and (le j (S n)) (divides p j)))&quot;, (&quot;p,k : nat&quot;)))" id="command-1-6" onmouseover="hoverTactic(&quot;1-6&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;forall (n : nat)
  (_ : forall (_ : prime p) (_ : lt O n) (_ : divides p (factorial n)),
       ex (fun j : nat => and (lt O j) (and (le j n) (divides p j))))
  (_ : prime p) (_ : lt O (S n)) (_ : divides p (factorial (S n))),
ex (fun j : nat => and (lt O j) (and (le j (S n)) (divides p j)))&quot;, (&quot;p,k : nat&quot;)))" id="command-1-7" onmouseover="hoverTactic(&quot;1-7&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros k' H' H'0 H'1 H'2.</code><br /></span><span data-subgoals="((&quot;ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-8" onmouseover="hoverTactic(&quot;1-8&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">case (L_Euclides2 p (S k') (factorial k')).</code><br /></span><span data-subgoals="((&quot;prime p&quot;, (&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;divides p (Init.Nat.mul (S k') (factorial k'))&quot;, (&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-9" onmouseover="hoverTactic(&quot;1-9&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;divides p (Init.Nat.mul (S k') (factorial k'))&quot;, (&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;forall _ : divides p (S k'),
ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-10" onmouseover="hoverTactic(&quot;1-10&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall _ : divides p (S k'),
ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;forall _ : divides p (factorial k'),
ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-11" onmouseover="hoverTactic(&quot;1-11&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall _ : divides p (S k'),
ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;forall _ : divides p (factorial k'),
ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-12" onmouseover="hoverTactic(&quot;1-12&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros H'3.</code><br /></span><span data-subgoals="((&quot;ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'3 : divides p (S k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;forall _ : divides p (factorial k'),
ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-13" onmouseover="hoverTactic(&quot;1-13&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">exists (S k').</code><br /></span><span data-subgoals="((&quot;and (lt O (S k')) (and (le (S k') (S k')) (divides p (S k')))&quot;, (&quot;H'3 : divides p (S k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;forall _ : divides p (factorial k'),
ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-14" onmouseover="hoverTactic(&quot;1-14&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall _ : divides p (factorial k'),
ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-15" onmouseover="hoverTactic(&quot;1-15&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall _ : divides p (factorial k'),
ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-16" onmouseover="hoverTactic(&quot;1-16&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros H'3.</code><br /></span><span data-subgoals="((&quot;ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-17" onmouseover="hoverTactic(&quot;1-17&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">elim H'.</code><br /></span><span data-subgoals="((&quot;forall (x : nat) (_ : and (lt O x) (and (le x k') (divides p x))),
ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;prime p&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-18" onmouseover="hoverTactic(&quot;1-18&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros j E.</code><br /></span><span data-subgoals="((&quot;ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;E : and (lt O j) (and (le j k') (divides p j))&quot;,&quot;j : nat&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;prime p&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-19" onmouseover="hoverTactic(&quot;1-19&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">elim E.</code><br /></span><span data-subgoals="((&quot;forall (_ : lt O j) (_ : and (le j k') (divides p j)),
ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;E : and (lt O j) (and (le j k') (divides p j))&quot;,&quot;j : nat&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;prime p&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-20" onmouseover="hoverTactic(&quot;1-20&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros H'7 H'8.</code><br /></span><span data-subgoals="((&quot;ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'8 : and (le j k') (divides p j)&quot;,&quot;H'7 : lt O j&quot;,&quot;E : and (lt O j) (and (le j k') (divides p j))&quot;,&quot;j : nat&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;prime p&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-21" onmouseover="hoverTactic(&quot;1-21&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">elim H'8.</code><br /></span><span data-subgoals="((&quot;forall (_ : le j k') (_ : divides p j),
ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'8 : and (le j k') (divides p j)&quot;,&quot;H'7 : lt O j&quot;,&quot;E : and (lt O j) (and (le j k') (divides p j))&quot;,&quot;j : nat&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;prime p&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-22" onmouseover="hoverTactic(&quot;1-22&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros H'9 H'10.</code><br /></span><span data-subgoals="((&quot;ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'10 : divides p j&quot;,&quot;H'9 : le j k'&quot;,&quot;H'8 : and (le j k') (divides p j)&quot;,&quot;H'7 : lt O j&quot;,&quot;E : and (lt O j) (and (le j k') (divides p j))&quot;,&quot;j : nat&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;prime p&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-23" onmouseover="hoverTactic(&quot;1-23&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">try exact H'10.</code><br /></span><span data-subgoals="((&quot;ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'10 : divides p j&quot;,&quot;H'9 : le j k'&quot;,&quot;H'8 : and (le j k') (divides p j)&quot;,&quot;H'7 : lt O j&quot;,&quot;E : and (lt O j) (and (le j k') (divides p j))&quot;,&quot;j : nat&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;prime p&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-24" onmouseover="hoverTactic(&quot;1-24&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;ex (fun j : nat => and (lt O j) (and (le j (S k')) (divides p j)))&quot;, (&quot;H'10 : divides p j&quot;,&quot;H'9 : le j k'&quot;,&quot;H'8 : and (le j k') (divides p j)&quot;,&quot;H'7 : lt O j&quot;,&quot;E : and (lt O j) (and (le j k') (divides p j))&quot;,&quot;j : nat&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;prime p&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-25" onmouseover="hoverTactic(&quot;1-25&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">exists j.</code><br /></span><span data-subgoals="((&quot;and (lt O j) (and (le j (S k')) (divides p j))&quot;, (&quot;H'10 : divides p j&quot;,&quot;H'9 : le j k'&quot;,&quot;H'8 : and (le j k') (divides p j)&quot;,&quot;H'7 : lt O j&quot;,&quot;E : and (lt O j) (and (le j k') (divides p j))&quot;,&quot;j : nat&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;prime p&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-26" onmouseover="hoverTactic(&quot;1-26&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">split.</code><br /></span><span data-subgoals="((&quot;lt O j&quot;, (&quot;H'10 : divides p j&quot;,&quot;H'9 : le j k'&quot;,&quot;H'8 : and (le j k') (divides p j)&quot;,&quot;H'7 : lt O j&quot;,&quot;E : and (lt O j) (and (le j k') (divides p j))&quot;,&quot;j : nat&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;prime p&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-27" onmouseover="hoverTactic(&quot;1-27&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;and (le j (S k')) (divides p j)&quot;, (&quot;H'10 : divides p j&quot;,&quot;H'9 : le j k'&quot;,&quot;H'8 : and (le j k') (divides p j)&quot;,&quot;H'7 : lt O j&quot;,&quot;E : and (lt O j) (and (le j k') (divides p j))&quot;,&quot;j : nat&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;prime p&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-28" onmouseover="hoverTactic(&quot;1-28&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;prime p&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;lt O k'&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-29" onmouseover="hoverTactic(&quot;1-29&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">clear H'.</code><br /></span><span data-subgoals="((&quot;prime p&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)),(&quot;lt O k'&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-30" onmouseover="hoverTactic(&quot;1-30&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;lt O k'&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)),(&quot;divides p (factorial k')&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-31" onmouseover="hoverTactic(&quot;1-31&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">clear H'.</code><br /></span><span data-subgoals="((&quot;lt O k'&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)),(&quot;divides p (factorial k')&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-32" onmouseover="hoverTactic(&quot;1-32&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;lt O k'&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)),(&quot;divides p (factorial k')&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-33" onmouseover="hoverTactic(&quot;1-33&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">generalize H'3.</code><br /></span><span data-subgoals="((&quot;forall _ : divides p (factorial k'), lt O k'&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)),(&quot;divides p (factorial k')&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-34" onmouseover="hoverTactic(&quot;1-34&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">case k'.</code><br /></span><span data-subgoals="((&quot;forall _ : divides p (factorial O), lt O O&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)),(&quot;divides p (factorial k')&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-35" onmouseover="hoverTactic(&quot;1-35&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">simpl in |- *.</code><br /></span><span data-subgoals="((&quot;forall _ : divides p (S O), lt O O&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)),(&quot;divides p (factorial k')&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-36" onmouseover="hoverTactic(&quot;1-36&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;forall _ : divides p (S O), lt O O&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)),(&quot;divides p (factorial k')&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-37" onmouseover="hoverTactic(&quot;1-37&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros H'4.</code><br /></span><span data-subgoals="((&quot;lt O O&quot;, (&quot;H'4 : divides p (S O)&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)),(&quot;divides p (factorial k')&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-38" onmouseover="hoverTactic(&quot;1-38&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">absurd (prime 1).</code><br /></span><span data-subgoals="((&quot;not (prime (S O))&quot;, (&quot;H'4 : divides p (S O)&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)),(&quot;divides p (factorial k')&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-39" onmouseover="hoverTactic(&quot;1-39&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;prime (S O)&quot;, (&quot;H'4 : divides p (S O)&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)),(&quot;forall (n : nat) (_ : divides p (factorial (S n))), lt O (S n)&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-40" onmouseover="hoverTactic(&quot;1-40&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;prime (S O)&quot;, (&quot;H'4 : divides p (S O)&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)),(&quot;forall (n : nat) (_ : divides p (factorial (S n))), lt O (S n)&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-41" onmouseover="hoverTactic(&quot;1-41&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite (divides_antisym 1 p).</code><br /></span><span data-subgoals="((&quot;prime p&quot;, (&quot;H'4 : divides p (S O)&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)),(&quot;forall (n : nat) (_ : divides p (factorial (S n))), lt O (S n)&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-42" onmouseover="hoverTactic(&quot;1-42&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;divides (S O) p&quot;, (&quot;H'4 : divides p (S O)&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)),(&quot;forall (n : nat) (_ : divides p (factorial (S n))), lt O (S n)&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-43" onmouseover="hoverTactic(&quot;1-43&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;divides p (S O)&quot;, (&quot;H'4 : divides p (S O)&quot;,&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)),(&quot;forall (n : nat) (_ : divides p (factorial (S n))), lt O (S n)&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-44" onmouseover="hoverTactic(&quot;1-44&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall (n : nat) (_ : divides p (factorial (S n))), lt O (S n)&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)),(&quot;divides p (factorial k')&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-45" onmouseover="hoverTactic(&quot;1-45&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">simpl in |- *.</code><br /></span><span data-subgoals="((&quot;forall (n : nat)
  (_ : divides p
         (Init.Nat.add (factorial n) (Init.Nat.mul n (factorial n)))),
lt O (S n)&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)),(&quot;divides p (factorial k')&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-46" onmouseover="hoverTactic(&quot;1-46&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;divides p (factorial k')&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;H' : forall (_ : prime p) (_ : lt O k') (_ : divides p (factorial k')),
ex (fun j : nat => and (lt O j) (and (le j k') (divides p j)))&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-47" onmouseover="hoverTactic(&quot;1-47&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">clear H'.</code><br /></span><span data-subgoals="((&quot;divides p (factorial k')&quot;, (&quot;H'3 : divides p (factorial k')&quot;,&quot;H'2 : divides p (factorial (S k'))&quot;,&quot;H'1 : lt O (S k')&quot;,&quot;H'0 : prime p&quot;,&quot;p,k,k' : nat&quot;)))" id="command-1-48" onmouseover="hoverTactic(&quot;1-48&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="()" id="command-1-49" onmouseover="hoverTactic(&quot;1-49&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">Qed.</code><br /></span></div></div><button class="collapsible okay" onmouseover="hoverLemma(&quot;FermatZdp_div_bin&quot;)" onmouseout="unhoverLemma(&quot;FermatZdp_div_bin&quot;)"><code class="buttontext">Lemma p_div_bin :
 forall k p : nat, prime p -&gt; 0 &lt; k -&gt; k &lt; p -&gt; divides p (binomial p k).</code></button><div class="region"><div class="predicted"><span data-subgoals="((&quot;forall (k p : nat) (_ : prime p) (_ : lt O k) (_ : lt k p),
divides p (binomial p k)&quot;, (&quot;&quot;)))" id="command-3-0" onmouseover="hoverTactic(&quot;3-0&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">Proof.</code><br /></span><span data-subgoals="((&quot;forall (k p : nat) (_ : prime p) (_ : lt O k) (_ : lt k p),
divides p (binomial p k)&quot;, (&quot;&quot;)))" id="command-3-1" onmouseover="hoverTactic(&quot;3-1&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">Admitted.</code><br /></span></div><div class="original"><span data-subgoals="((&quot;forall (k p : nat) (_ : prime p) (_ : lt O k) (_ : lt k p),
divides p (binomial p k)&quot;, (&quot;&quot;)))" id="command-3-0" onmouseover="hoverTactic(&quot;3-0&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">Proof.</code><br /></span><span data-subgoals="((&quot;forall (k p : nat) (_ : prime p) (_ : lt O k) (_ : lt k p),
divides p (binomial p k)&quot;, (&quot;&quot;)))" id="command-3-1" onmouseover="hoverTactic(&quot;3-1&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros k p.</code><br /></span><span data-subgoals="((&quot;forall (_ : prime p) (_ : lt O k) (_ : lt k p),
divides p (binomial p k)&quot;, (&quot;k,p : nat&quot;)))" id="command-3-2" onmouseover="hoverTactic(&quot;3-2&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">case p.</code><br /></span><span data-subgoals="((&quot;forall (_ : prime O) (_ : lt O k) (_ : lt k O),
divides O (binomial O k)&quot;, (&quot;k,p : nat&quot;)),(&quot;forall (n : nat) (_ : prime (S n)) (_ : lt O k) (_ : lt k (S n)),
divides (S n) (binomial (S n) k)&quot;, (&quot;k,p : nat&quot;)))" id="command-3-3" onmouseover="hoverTactic(&quot;3-3&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall (_ : prime O) (_ : lt O k) (_ : lt k O),
divides O (binomial O k)&quot;, (&quot;k,p : nat&quot;)),(&quot;forall (n : nat) (_ : prime (S n)) (_ : lt O k) (_ : lt k (S n)),
divides (S n) (binomial (S n) k)&quot;, (&quot;k,p : nat&quot;)))" id="command-3-4" onmouseover="hoverTactic(&quot;3-4&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros H'.</code><br /></span><span data-subgoals="((&quot;forall (_ : lt O k) (_ : lt k O), divides O (binomial O k)&quot;, (&quot;H' : prime O&quot;,&quot;k,p : nat&quot;)),(&quot;forall (n : nat) (_ : prime (S n)) (_ : lt O k) (_ : lt k (S n)),
divides (S n) (binomial (S n) k)&quot;, (&quot;k,p : nat&quot;)))" id="command-3-5" onmouseover="hoverTactic(&quot;3-5&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">absurd (prime 0).</code><br /></span><span data-subgoals="((&quot;not (prime O)&quot;, (&quot;H' : prime O&quot;,&quot;k,p : nat&quot;)),(&quot;forall (n : nat) (_ : prime (S n)) (_ : lt O k) (_ : lt k (S n)),
divides (S n) (binomial (S n) k)&quot;, (&quot;k,p : nat&quot;)))" id="command-3-6" onmouseover="hoverTactic(&quot;3-6&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;prime O&quot;, (&quot;H' : prime O&quot;,&quot;k,p : nat&quot;)),(&quot;forall (n : nat) (_ : prime (S n)) (_ : lt O k) (_ : lt k (S n)),
divides (S n) (binomial (S n) k)&quot;, (&quot;k,p : nat&quot;)))" id="command-3-7" onmouseover="hoverTactic(&quot;3-7&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall (n : nat) (_ : prime (S n)) (_ : lt O k) (_ : lt k (S n)),
divides (S n) (binomial (S n) k)&quot;, (&quot;k,p : nat&quot;)))" id="command-3-8" onmouseover="hoverTactic(&quot;3-8&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall (n : nat) (_ : prime (S n)) (_ : lt O k) (_ : lt k (S n)),
divides (S n) (binomial (S n) k)&quot;, (&quot;k,p : nat&quot;)))" id="command-3-9" onmouseover="hoverTactic(&quot;3-9&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros p' H' H'0 H'1.</code><br /></span><span data-subgoals="((&quot;divides (S p') (binomial (S p') k)&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-10" onmouseover="hoverTactic(&quot;3-10&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply L_Euclides1 with (factorial k).</code><br /></span><span data-subgoals="((&quot;prime (S p')&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;divides (S p') (Init.Nat.mul (factorial k) (binomial (S p') k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-11" onmouseover="hoverTactic(&quot;3-11&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;divides (S p') (Init.Nat.mul (factorial k) (binomial (S p') k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-12" onmouseover="hoverTactic(&quot;3-12&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;divides (S p') (Init.Nat.mul (factorial k) (binomial (S p') k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-13" onmouseover="hoverTactic(&quot;3-13&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply L_Euclides1 with (factorial (S p' - k)).</code><br /></span><span data-subgoals="((&quot;prime (S p')&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-14" onmouseover="hoverTactic(&quot;3-14&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;divides (S p')
  (Init.Nat.mul (factorial (Init.Nat.sub (S p') k))
     (Init.Nat.mul (factorial k) (binomial (S p') k)))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-15" onmouseover="hoverTactic(&quot;3-15&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;divides (S p')
  (Init.Nat.mul (factorial (Init.Nat.sub (S p') k))
     (Init.Nat.mul (factorial k) (binomial (S p') k)))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-16" onmouseover="hoverTactic(&quot;3-16&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite mult_assoc.</code><br /></span><span data-subgoals="((&quot;divides (S p')
  (Nat.mul (Nat.mul (factorial (Init.Nat.sub (S p') k)) (factorial k))
     (binomial (S p') k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-17" onmouseover="hoverTactic(&quot;3-17&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite mult_comm.</code><br /></span><span data-subgoals="((&quot;divides (S p')
  (Nat.mul (binomial (S p') k)
     (Nat.mul (factorial (Init.Nat.sub (S p') k)) (factorial k)))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-18" onmouseover="hoverTactic(&quot;3-18&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">pattern (S p') at 2 in |- *.</code><br /></span><span data-subgoals="((&quot;(fun n : nat =>
 divides (S p')
   (Nat.mul (binomial n k)
      (Nat.mul (factorial (Init.Nat.sub (S p') k)) (factorial k))))
  (S p')&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-19" onmouseover="hoverTactic(&quot;3-19&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite (le_plus_minus k (S p')).</code><br /></span><span data-subgoals="((&quot;divides (S p')
  (Nat.mul (binomial (Init.Nat.add k (Init.Nat.sub (S p') k)) k)
     (Nat.mul (factorial (Init.Nat.sub (S p') k)) (factorial k)))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-20" onmouseover="hoverTactic(&quot;3-20&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;divides (S p')
  (Nat.mul (binomial (Init.Nat.add k (Init.Nat.sub (S p') k)) k)
     (Nat.mul (factorial (Init.Nat.sub (S p') k)) (factorial k)))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-21" onmouseover="hoverTactic(&quot;3-21&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite mult_comm with (m := factorial k).</code><br /></span><span data-subgoals="((&quot;divides (S p')
  (Nat.mul (binomial (Init.Nat.add k (Init.Nat.sub (S p') k)) k)
     (Nat.mul (factorial k) (factorial (Init.Nat.sub (S p') k))))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-22" onmouseover="hoverTactic(&quot;3-22&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;divides (S p')
  (Nat.mul (binomial (Init.Nat.add k (Init.Nat.sub (S p') k)) k)
     (Nat.mul (factorial k) (factorial (Init.Nat.sub (S p') k))))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-23" onmouseover="hoverTactic(&quot;3-23&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite binomial_fact.</code><br /></span><span data-subgoals="((&quot;divides (S p') (factorial (Init.Nat.add k (Init.Nat.sub (S p') k)))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-24" onmouseover="hoverTactic(&quot;3-24&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;divides (S p') (factorial (Init.Nat.add k (Init.Nat.sub (S p') k)))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-25" onmouseover="hoverTactic(&quot;3-25&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite &lt;- le_plus_minus.</code><br /></span><span data-subgoals="((&quot;divides (S p') (factorial (S p'))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-26" onmouseover="hoverTactic(&quot;3-26&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;divides (S p') (factorial (S p'))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-27" onmouseover="hoverTactic(&quot;3-27&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply dividesDef with (q := factorial p').</code><br /></span><span data-subgoals="((&quot;eq (factorial (S p')) (Init.Nat.mul (factorial p') (S p'))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-28" onmouseover="hoverTactic(&quot;3-28&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite mult_comm.</code><br /></span><span data-subgoals="((&quot;eq (factorial (S p')) (Nat.mul (S p') (factorial p'))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-29" onmouseover="hoverTactic(&quot;3-29&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;le k (S p')&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;le k (S p')&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-30" onmouseover="hoverTactic(&quot;3-30&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;le k (S p')&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial (Init.Nat.sub (S p') k)))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-31" onmouseover="hoverTactic(&quot;3-31&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;not (divides (S p') (factorial (Init.Nat.sub (S p') k)))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-32" onmouseover="hoverTactic(&quot;3-32&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;not (divides (S p') (factorial (Init.Nat.sub (S p') k)))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-33" onmouseover="hoverTactic(&quot;3-33&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">red in |- *.</code><br /></span><span data-subgoals="((&quot;forall _ : divides (S p') (factorial (Init.Nat.sub (S p') k)), False&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-34" onmouseover="hoverTactic(&quot;3-34&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros H'2.</code><br /></span><span data-subgoals="((&quot;False&quot;, (&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-35" onmouseover="hoverTactic(&quot;3-35&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">elim (div_fact (S p') (S p' - k)).</code><br /></span><span data-subgoals="((&quot;forall (x : nat)
  (_ : and (lt O x)
         (and (le x (Init.Nat.sub (S p') k)) (divides (S p') x))),
False&quot;, (&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-36" onmouseover="hoverTactic(&quot;3-36&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros j E.</code><br /></span><span data-subgoals="((&quot;False&quot;, (&quot;E : and (lt O j) (and (le j (Init.Nat.sub (S p') k)) (divides (S p') j))&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-37" onmouseover="hoverTactic(&quot;3-37&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">elim E.</code><br /></span><span data-subgoals="((&quot;forall (_ : lt O j)
  (_ : and (le j (Init.Nat.sub (S p') k)) (divides (S p') j)), False&quot;, (&quot;E : and (lt O j) (and (le j (Init.Nat.sub (S p') k)) (divides (S p') j))&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-38" onmouseover="hoverTactic(&quot;3-38&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros H'7 H'8.</code><br /></span><span data-subgoals="((&quot;False&quot;, (&quot;H'8 : and (le j (Init.Nat.sub (S p') k)) (divides (S p') j)&quot;,&quot;H'7 : lt O j&quot;,&quot;E : and (lt O j) (and (le j (Init.Nat.sub (S p') k)) (divides (S p') j))&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-39" onmouseover="hoverTactic(&quot;3-39&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">elim H'8.</code><br /></span><span data-subgoals="((&quot;forall (_ : le j (Init.Nat.sub (S p') k)) (_ : divides (S p') j), False&quot;, (&quot;H'8 : and (le j (Init.Nat.sub (S p') k)) (divides (S p') j)&quot;,&quot;H'7 : lt O j&quot;,&quot;E : and (lt O j) (and (le j (Init.Nat.sub (S p') k)) (divides (S p') j))&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-40" onmouseover="hoverTactic(&quot;3-40&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros H'9 H'10.</code><br /></span><span data-subgoals="((&quot;False&quot;, (&quot;H'10 : divides (S p') j&quot;,&quot;H'9 : le j (Init.Nat.sub (S p') k)&quot;,&quot;H'8 : and (le j (Init.Nat.sub (S p') k)) (divides (S p') j)&quot;,&quot;H'7 : lt O j&quot;,&quot;E : and (lt O j) (and (le j (Init.Nat.sub (S p') k)) (divides (S p') j))&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-41" onmouseover="hoverTactic(&quot;3-41&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">clear H'8 E.</code><br /></span><span data-subgoals="((&quot;False&quot;, (&quot;H'10 : divides (S p') j&quot;,&quot;H'9 : le j (Init.Nat.sub (S p') k)&quot;,&quot;H'7 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-42" onmouseover="hoverTactic(&quot;3-42&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;False&quot;, (&quot;H'10 : divides (S p') j&quot;,&quot;H'9 : le j (Init.Nat.sub (S p') k)&quot;,&quot;H'7 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-43" onmouseover="hoverTactic(&quot;3-43&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">absurd (divides (S p') j).</code><br /></span><span data-subgoals="((&quot;not (divides (S p') j)&quot;, (&quot;H'10 : divides (S p') j&quot;,&quot;H'9 : le j (Init.Nat.sub (S p') k)&quot;,&quot;H'7 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-44" onmouseover="hoverTactic(&quot;3-44&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;not (divides (S p') j)&quot;, (&quot;H'10 : divides (S p') j&quot;,&quot;H'9 : le j (Init.Nat.sub (S p') k)&quot;,&quot;H'7 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-45" onmouseover="hoverTactic(&quot;3-45&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply not_lt_div.</code><br /></span><span data-subgoals="((&quot;lt O j&quot;, (&quot;H'10 : divides (S p') j&quot;,&quot;H'9 : le j (Init.Nat.sub (S p') k)&quot;,&quot;H'7 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-46" onmouseover="hoverTactic(&quot;3-46&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;lt j (S p')&quot;, (&quot;H'10 : divides (S p') j&quot;,&quot;H'9 : le j (Init.Nat.sub (S p') k)&quot;,&quot;H'7 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;divides (S p') j&quot;, (&quot;H'10 : divides (S p') j&quot;,&quot;H'9 : le j (Init.Nat.sub (S p') k)&quot;,&quot;H'7 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-47" onmouseover="hoverTactic(&quot;3-47&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;lt j (S p')&quot;, (&quot;H'10 : divides (S p') j&quot;,&quot;H'9 : le j (Init.Nat.sub (S p') k)&quot;,&quot;H'7 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;divides (S p') j&quot;, (&quot;H'10 : divides (S p') j&quot;,&quot;H'9 : le j (Init.Nat.sub (S p') k)&quot;,&quot;H'7 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-48" onmouseover="hoverTactic(&quot;3-48&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply le_lt_trans with (m := S p' - k).</code><br /></span><span data-subgoals="((&quot;le j (Init.Nat.sub (S p') k)&quot;, (&quot;H'10 : divides (S p') j&quot;,&quot;H'9 : le j (Init.Nat.sub (S p') k)&quot;,&quot;H'7 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;divides (S p') j&quot;, (&quot;H'10 : divides (S p') j&quot;,&quot;H'9 : le j (Init.Nat.sub (S p') k)&quot;,&quot;H'7 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-49" onmouseover="hoverTactic(&quot;3-49&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;lt (Init.Nat.sub (S p') k) (S p')&quot;, (&quot;H'10 : divides (S p') j&quot;,&quot;H'9 : le j (Init.Nat.sub (S p') k)&quot;,&quot;H'7 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;divides (S p') j&quot;, (&quot;H'10 : divides (S p') j&quot;,&quot;H'9 : le j (Init.Nat.sub (S p') k)&quot;,&quot;H'7 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-50" onmouseover="hoverTactic(&quot;3-50&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;divides (S p') j&quot;, (&quot;H'10 : divides (S p') j&quot;,&quot;H'9 : le j (Init.Nat.sub (S p') k)&quot;,&quot;H'7 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-51" onmouseover="hoverTactic(&quot;3-51&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-52" onmouseover="hoverTactic(&quot;3-52&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">idtac.</code><br /></span><span data-subgoals="((&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-53" onmouseover="hoverTactic(&quot;3-53&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;lt O (Init.Nat.sub (S p') k)&quot;, (&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-54" onmouseover="hoverTactic(&quot;3-54&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">idtac.</code><br /></span><span data-subgoals="((&quot;lt O (Init.Nat.sub (S p') k)&quot;, (&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-55" onmouseover="hoverTactic(&quot;3-55&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;lt O (Init.Nat.sub (S p') k)&quot;, (&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-56" onmouseover="hoverTactic(&quot;3-56&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply lt_minus_O_lt.</code><br /></span><span data-subgoals="((&quot;lt k (S p')&quot;, (&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-57" onmouseover="hoverTactic(&quot;3-57&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;, (&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-58" onmouseover="hoverTactic(&quot;3-58&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">idtac.</code><br /></span><span data-subgoals="((&quot;divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;, (&quot;H'2 : divides (S p') (factorial (Init.Nat.sub (S p') k))&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-59" onmouseover="hoverTactic(&quot;3-59&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-60" onmouseover="hoverTactic(&quot;3-60&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;not (divides (S p') (factorial k))&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-61" onmouseover="hoverTactic(&quot;3-61&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">red in |- *.</code><br /></span><span data-subgoals="((&quot;forall _ : divides (S p') (factorial k), False&quot;, (&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-62" onmouseover="hoverTactic(&quot;3-62&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros H'2.</code><br /></span><span data-subgoals="((&quot;False&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-63" onmouseover="hoverTactic(&quot;3-63&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">elim (div_fact (S p') k).</code><br /></span><span data-subgoals="((&quot;forall (x : nat) (_ : and (lt O x) (and (le x k) (divides (S p') x))),
False&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-64" onmouseover="hoverTactic(&quot;3-64&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros j E.</code><br /></span><span data-subgoals="((&quot;False&quot;, (&quot;E : and (lt O j) (and (le j k) (divides (S p') j))&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-65" onmouseover="hoverTactic(&quot;3-65&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">elim E.</code><br /></span><span data-subgoals="((&quot;forall (_ : lt O j) (_ : and (le j k) (divides (S p') j)), False&quot;, (&quot;E : and (lt O j) (and (le j k) (divides (S p') j))&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-66" onmouseover="hoverTactic(&quot;3-66&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros H'8 H'9.</code><br /></span><span data-subgoals="((&quot;False&quot;, (&quot;H'9 : and (le j k) (divides (S p') j)&quot;,&quot;H'8 : lt O j&quot;,&quot;E : and (lt O j) (and (le j k) (divides (S p') j))&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-67" onmouseover="hoverTactic(&quot;3-67&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">elim H'9.</code><br /></span><span data-subgoals="((&quot;forall (_ : le j k) (_ : divides (S p') j), False&quot;, (&quot;H'9 : and (le j k) (divides (S p') j)&quot;,&quot;H'8 : lt O j&quot;,&quot;E : and (lt O j) (and (le j k) (divides (S p') j))&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-68" onmouseover="hoverTactic(&quot;3-68&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros H'10 H'11.</code><br /></span><span data-subgoals="((&quot;False&quot;, (&quot;H'11 : divides (S p') j&quot;,&quot;H'10 : le j k&quot;,&quot;H'9 : and (le j k) (divides (S p') j)&quot;,&quot;H'8 : lt O j&quot;,&quot;E : and (lt O j) (and (le j k) (divides (S p') j))&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-69" onmouseover="hoverTactic(&quot;3-69&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">clear H'9 E.</code><br /></span><span data-subgoals="((&quot;False&quot;, (&quot;H'11 : divides (S p') j&quot;,&quot;H'10 : le j k&quot;,&quot;H'8 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-70" onmouseover="hoverTactic(&quot;3-70&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;False&quot;, (&quot;H'11 : divides (S p') j&quot;,&quot;H'10 : le j k&quot;,&quot;H'8 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-71" onmouseover="hoverTactic(&quot;3-71&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">absurd (divides (S p') j).</code><br /></span><span data-subgoals="((&quot;not (divides (S p') j)&quot;, (&quot;H'11 : divides (S p') j&quot;,&quot;H'10 : le j k&quot;,&quot;H'8 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-72" onmouseover="hoverTactic(&quot;3-72&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;not (divides (S p') j)&quot;, (&quot;H'11 : divides (S p') j&quot;,&quot;H'10 : le j k&quot;,&quot;H'8 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-73" onmouseover="hoverTactic(&quot;3-73&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply not_lt_div.</code><br /></span><span data-subgoals="((&quot;lt O j&quot;, (&quot;H'11 : divides (S p') j&quot;,&quot;H'10 : le j k&quot;,&quot;H'8 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-74" onmouseover="hoverTactic(&quot;3-74&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;lt j (S p')&quot;, (&quot;H'11 : divides (S p') j&quot;,&quot;H'10 : le j k&quot;,&quot;H'8 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;divides (S p') j&quot;, (&quot;H'11 : divides (S p') j&quot;,&quot;H'10 : le j k&quot;,&quot;H'8 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-75" onmouseover="hoverTactic(&quot;3-75&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;lt j (S p')&quot;, (&quot;H'11 : divides (S p') j&quot;,&quot;H'10 : le j k&quot;,&quot;H'8 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;divides (S p') j&quot;, (&quot;H'11 : divides (S p') j&quot;,&quot;H'10 : le j k&quot;,&quot;H'8 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-76" onmouseover="hoverTactic(&quot;3-76&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply le_lt_trans with (m := k).</code><br /></span><span data-subgoals="((&quot;le j k&quot;, (&quot;H'11 : divides (S p') j&quot;,&quot;H'10 : le j k&quot;,&quot;H'8 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;divides (S p') j&quot;, (&quot;H'11 : divides (S p') j&quot;,&quot;H'10 : le j k&quot;,&quot;H'8 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-77" onmouseover="hoverTactic(&quot;3-77&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;lt k (S p')&quot;, (&quot;H'11 : divides (S p') j&quot;,&quot;H'10 : le j k&quot;,&quot;H'8 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;divides (S p') j&quot;, (&quot;H'11 : divides (S p') j&quot;,&quot;H'10 : le j k&quot;,&quot;H'8 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-78" onmouseover="hoverTactic(&quot;3-78&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;divides (S p') j&quot;, (&quot;H'11 : divides (S p') j&quot;,&quot;H'10 : le j k&quot;,&quot;H'8 : lt O j&quot;,&quot;j : nat&quot;,&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-79" onmouseover="hoverTactic(&quot;3-79&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;lt O k&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-80" onmouseover="hoverTactic(&quot;3-80&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">idtac.</code><br /></span><span data-subgoals="((&quot;prime (S p')&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;lt O k&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-81" onmouseover="hoverTactic(&quot;3-81&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;lt O k&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;divides (S p') (factorial k)&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-82" onmouseover="hoverTactic(&quot;3-82&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">idtac.</code><br /></span><span data-subgoals="((&quot;lt O k&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)),(&quot;divides (S p') (factorial k)&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-83" onmouseover="hoverTactic(&quot;3-83&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;divides (S p') (factorial k)&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-84" onmouseover="hoverTactic(&quot;3-84&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">idtac.</code><br /></span><span data-subgoals="((&quot;divides (S p') (factorial k)&quot;, (&quot;H'2 : divides (S p') (factorial k)&quot;,&quot;H'1 : lt k (S p')&quot;,&quot;H'0 : lt O k&quot;,&quot;H' : prime (S p')&quot;,&quot;k,p,p' : nat&quot;)))" id="command-3-85" onmouseover="hoverTactic(&quot;3-85&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="()" id="command-3-86" onmouseover="hoverTactic(&quot;3-86&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">Qed.</code><br /></span></div></div><button class="collapsible okay" onmouseover="hoverLemma(&quot;FermatZdFermat1&quot;)" onmouseout="unhoverLemma(&quot;FermatZdFermat1&quot;)"><code class="buttontext">Lemma Fermat1 :
 forall x p : nat, prime p -&gt; congruent p (power (x + 1) p) (power x p + 1).</code></button><div class="region"><div class="predicted"><span data-subgoals="((&quot;forall (x p : nat) (_ : prime p),
congruent p (power (Init.Nat.add x (S O)) p)
  (Init.Nat.add (power x p) (S O))&quot;, (&quot;&quot;)))" id="command-5-0" onmouseover="hoverTactic(&quot;5-0&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">Proof.</code><br /></span><span data-subgoals="((&quot;forall (x p : nat) (_ : prime p),
congruent p (power (Init.Nat.add x (S O)) p)
  (Init.Nat.add (power x p) (S O))&quot;, (&quot;&quot;)))" id="command-5-1" onmouseover="hoverTactic(&quot;5-1&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">Admitted.</code><br /></span></div><div class="original"><span data-subgoals="((&quot;forall (x p : nat) (_ : prime p),
congruent p (power (Init.Nat.add x (S O)) p)
  (Init.Nat.add (power x p) (S O))&quot;, (&quot;&quot;)))" id="command-5-0" onmouseover="hoverTactic(&quot;5-0&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">Proof.</code><br /></span><span data-subgoals="((&quot;forall (x p : nat) (_ : prime p),
congruent p (power (Init.Nat.add x (S O)) p)
  (Init.Nat.add (power x p) (S O))&quot;, (&quot;&quot;)))" id="command-5-1" onmouseover="hoverTactic(&quot;5-1&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros x p.</code><br /></span><span data-subgoals="((&quot;forall _ : prime p,
congruent p (power (Init.Nat.add x (S O)) p)
  (Init.Nat.add (power x p) (S O))&quot;, (&quot;x,p : nat&quot;)))" id="command-5-2" onmouseover="hoverTactic(&quot;5-2&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">case p.</code><br /></span><span data-subgoals="((&quot;forall _ : prime O,
congruent O (power (Init.Nat.add x (S O)) O)
  (Init.Nat.add (power x O) (S O))&quot;, (&quot;x,p : nat&quot;)),(&quot;forall (n : nat) (_ : prime (S n)),
congruent (S n) (power (Init.Nat.add x (S O)) (S n))
  (Init.Nat.add (power x (S n)) (S O))&quot;, (&quot;x,p : nat&quot;)))" id="command-5-3" onmouseover="hoverTactic(&quot;5-3&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall _ : prime O,
congruent O (power (Init.Nat.add x (S O)) O)
  (Init.Nat.add (power x O) (S O))&quot;, (&quot;x,p : nat&quot;)),(&quot;forall (n : nat) (_ : prime (S n)),
congruent (S n) (power (Init.Nat.add x (S O)) (S n))
  (Init.Nat.add (power x (S n)) (S O))&quot;, (&quot;x,p : nat&quot;)))" id="command-5-4" onmouseover="hoverTactic(&quot;5-4&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros H'.</code><br /></span><span data-subgoals="((&quot;congruent O (power (Init.Nat.add x (S O)) O)
  (Init.Nat.add (power x O) (S O))&quot;, (&quot;H' : prime O&quot;,&quot;x,p : nat&quot;)),(&quot;forall (n : nat) (_ : prime (S n)),
congruent (S n) (power (Init.Nat.add x (S O)) (S n))
  (Init.Nat.add (power x (S n)) (S O))&quot;, (&quot;x,p : nat&quot;)))" id="command-5-5" onmouseover="hoverTactic(&quot;5-5&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">absurd (prime 0).</code><br /></span><span data-subgoals="((&quot;not (prime O)&quot;, (&quot;H' : prime O&quot;,&quot;x,p : nat&quot;)),(&quot;forall (n : nat) (_ : prime (S n)),
congruent (S n) (power (Init.Nat.add x (S O)) (S n))
  (Init.Nat.add (power x (S n)) (S O))&quot;, (&quot;x,p : nat&quot;)))" id="command-5-6" onmouseover="hoverTactic(&quot;5-6&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;prime O&quot;, (&quot;H' : prime O&quot;,&quot;x,p : nat&quot;)),(&quot;forall (n : nat) (_ : prime (S n)),
congruent (S n) (power (Init.Nat.add x (S O)) (S n))
  (Init.Nat.add (power x (S n)) (S O))&quot;, (&quot;x,p : nat&quot;)))" id="command-5-7" onmouseover="hoverTactic(&quot;5-7&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall (n : nat) (_ : prime (S n)),
congruent (S n) (power (Init.Nat.add x (S O)) (S n))
  (Init.Nat.add (power x (S n)) (S O))&quot;, (&quot;x,p : nat&quot;)))" id="command-5-8" onmouseover="hoverTactic(&quot;5-8&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall (n : nat) (_ : prime (S n)),
congruent (S n) (power (Init.Nat.add x (S O)) (S n))
  (Init.Nat.add (power x (S n)) (S O))&quot;, (&quot;x,p : nat&quot;)))" id="command-5-9" onmouseover="hoverTactic(&quot;5-9&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros n.</code><br /></span><span data-subgoals="((&quot;forall _ : prime (S n),
congruent (S n) (power (Init.Nat.add x (S O)) (S n))
  (Init.Nat.add (power x (S n)) (S O))&quot;, (&quot;x,p,n : nat&quot;)))" id="command-5-10" onmouseover="hoverTactic(&quot;5-10&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">case n.</code><br /></span><span data-subgoals="((&quot;forall _ : prime (S O),
congruent (S O) (power (Init.Nat.add x (S O)) (S O))
  (Init.Nat.add (power x (S O)) (S O))&quot;, (&quot;x,p,n : nat&quot;)),(&quot;forall (n : nat) (_ : prime (S (S n))),
congruent (S (S n)) (power (Init.Nat.add x (S O)) (S (S n)))
  (Init.Nat.add (power x (S (S n))) (S O))&quot;, (&quot;x,p,n : nat&quot;)))" id="command-5-11" onmouseover="hoverTactic(&quot;5-11&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros H'.</code><br /></span><span data-subgoals="((&quot;congruent (S O) (power (Init.Nat.add x (S O)) (S O))
  (Init.Nat.add (power x (S O)) (S O))&quot;, (&quot;H' : prime (S O)&quot;,&quot;x,p,n : nat&quot;)),(&quot;forall (n : nat) (_ : prime (S (S n))),
congruent (S (S n)) (power (Init.Nat.add x (S O)) (S (S n)))
  (Init.Nat.add (power x (S (S n))) (S O))&quot;, (&quot;x,p,n : nat&quot;)))" id="command-5-12" onmouseover="hoverTactic(&quot;5-12&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">absurd (prime 1).</code><br /></span><span data-subgoals="((&quot;not (prime (S O))&quot;, (&quot;H' : prime (S O)&quot;,&quot;x,p,n : nat&quot;)),(&quot;forall (n : nat) (_ : prime (S (S n))),
congruent (S (S n)) (power (Init.Nat.add x (S O)) (S (S n)))
  (Init.Nat.add (power x (S (S n))) (S O))&quot;, (&quot;x,p,n : nat&quot;)))" id="command-5-13" onmouseover="hoverTactic(&quot;5-13&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;prime (S O)&quot;, (&quot;H' : prime (S O)&quot;,&quot;x,p,n : nat&quot;)),(&quot;forall (n : nat) (_ : prime (S (S n))),
congruent (S (S n)) (power (Init.Nat.add x (S O)) (S (S n)))
  (Init.Nat.add (power x (S (S n))) (S O))&quot;, (&quot;x,p,n : nat&quot;)))" id="command-5-14" onmouseover="hoverTactic(&quot;5-14&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall (n : nat) (_ : prime (S (S n))),
congruent (S (S n)) (power (Init.Nat.add x (S O)) (S (S n)))
  (Init.Nat.add (power x (S (S n))) (S O))&quot;, (&quot;x,p,n : nat&quot;)))" id="command-5-15" onmouseover="hoverTactic(&quot;5-15&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros n0 H'.</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0)) (power (Init.Nat.add x (S O)) (S (S n0)))
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-16" onmouseover="hoverTactic(&quot;5-16&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite (exp_Pascal x 1).</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0))
  (sum_nm (S (S n0)) O
     (fun k : nat =>
      Init.Nat.mul (binomial (S (S n0)) k)
        (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) k))
           (power (S O) k)))) (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-17" onmouseover="hoverTactic(&quot;5-17&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite sum_nm_i.</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0))
  (Init.Nat.add
     (Init.Nat.mul (binomial (S (S n0)) O)
        (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
           (power (S O) O)))
     (sum_nm (S n0) (S O)
        (fun k : nat =>
         Init.Nat.mul (binomial (S (S n0)) k)
           (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) k))
              (power (S O) k)))))
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-18" onmouseover="hoverTactic(&quot;5-18&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite sum_nm_f.</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0))
  (Init.Nat.add
     (Init.Nat.mul (binomial (S (S n0)) O)
        (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
           (power (S O) O)))
     (Init.Nat.add
        (sum_nm n0 (S O)
           (fun k : nat =>
            Init.Nat.mul (binomial (S (S n0)) k)
              (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) k))
                 (power (S O) k))))
        (Init.Nat.mul (binomial (S (S n0)) (Init.Nat.add (S O) (S n0)))
           (Init.Nat.mul
              (power x
                 (Init.Nat.sub (S (S n0)) (Init.Nat.add (S O) (S n0))))
              (power (S O) (Init.Nat.add (S O) (S n0)))))))
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-19" onmouseover="hoverTactic(&quot;5-19&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">replace (binomial (S (S n0)) 0 * (power x (S (S n0) - 0) * power 1 0)) with
 (power x (S (S n0))).</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0))
  (Init.Nat.add (power x (S (S n0)))
     (Init.Nat.add
        (sum_nm n0 (S O)
           (fun k : nat =>
            Init.Nat.mul (binomial (S (S n0)) k)
              (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) k))
                 (power (S O) k))))
        (Init.Nat.mul (binomial (S (S n0)) (Init.Nat.add (S O) (S n0)))
           (Init.Nat.mul
              (power x
                 (Init.Nat.sub (S (S n0)) (Init.Nat.add (S O) (S n0))))
              (power (S O) (Init.Nat.add (S O) (S n0)))))))
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-20" onmouseover="hoverTactic(&quot;5-20&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">replace
 (binomial (S (S n0)) (1 + S n0) *
  (power x (S (S n0) - (1 + S n0)) * power 1 (1 + S n0))) with 1.</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0))
  (Init.Nat.add (power x (S (S n0)))
     (Init.Nat.add
        (sum_nm n0 (S O)
           (fun k : nat =>
            Init.Nat.mul (binomial (S (S n0)) k)
              (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) k))
                 (power (S O) k)))) (S O)))
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-21" onmouseover="hoverTactic(&quot;5-21&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite plus_comm with (m := 1).</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0))
  (Init.Nat.add (power x (S (S n0)))
     (Nat.add (S O)
        (sum_nm n0 (S O)
           (fun k : nat =>
            Init.Nat.mul (binomial (S (S n0)) k)
              (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) k))
                 (power (S O) k))))))
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-22" onmouseover="hoverTactic(&quot;5-22&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">replace (power x (S (S n0)) + 1) with (power x (S (S n0)) + 1 + 0).</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0))
  (Init.Nat.add (power x (S (S n0)))
     (Nat.add (S O)
        (sum_nm n0 (S O)
           (fun k : nat =>
            Init.Nat.mul (binomial (S (S n0)) k)
              (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) k))
                 (power (S O) k))))))
  (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-23" onmouseover="hoverTactic(&quot;5-23&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0))
  (Init.Nat.add (power x (S (S n0)))
     (Nat.add (S O)
        (sum_nm n0 (S O)
           (fun k : nat =>
            Init.Nat.mul (binomial (S (S n0)) k)
              (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) k))
                 (power (S O) k))))))
  (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-24" onmouseover="hoverTactic(&quot;5-24&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite plus_assoc.</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0))
  (Nat.add (Nat.add (power x (S (S n0))) (S O))
     (sum_nm n0 (S O)
        (fun k : nat =>
         Init.Nat.mul (binomial (S (S n0)) k)
           (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) k))
              (power (S O) k)))))
  (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-25" onmouseover="hoverTactic(&quot;5-25&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply cong_plus.</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0)) (Nat.add (power x (S (S n0))) (S O))
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-26" onmouseover="hoverTactic(&quot;5-26&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0)) (Nat.add (power x (S (S n0))) (S O))
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-27" onmouseover="hoverTactic(&quot;5-27&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply cong_ref.</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0))
  (sum_nm n0 (S O)
     (fun k : nat =>
      Init.Nat.mul (binomial (S (S n0)) k)
        (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) k))
           (power (S O) k)))) O&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-28" onmouseover="hoverTactic(&quot;5-28&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0))
  (sum_nm n0 (S O)
     (fun k : nat =>
      Init.Nat.mul (binomial (S (S n0)) k)
        (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) k))
           (power (S O) k)))) O&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-29" onmouseover="hoverTactic(&quot;5-29&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply inv_sum_nm.</code><br /></span><span data-subgoals="((&quot;forall (a b : nat) (_ : congruent (S (S n0)) a O)
  (_ : congruent (S (S n0)) b O),
congruent (S (S n0)) (Init.Nat.add a b) O&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-30" onmouseover="hoverTactic(&quot;5-30&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">replace 0 with (0 + 0).</code><br /></span><span data-subgoals="((&quot;forall (a b : nat) (_ : congruent (S (S n0)) a (Init.Nat.add O O))
  (_ : congruent (S (S n0)) b (Init.Nat.add O O)),
congruent (S (S n0)) (Init.Nat.add a b) (Init.Nat.add O O)&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-31" onmouseover="hoverTactic(&quot;5-31&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall (a b : nat) (_ : congruent (S (S n0)) a (Init.Nat.add O O))
  (_ : congruent (S (S n0)) b (Init.Nat.add O O)),
congruent (S (S n0)) (Init.Nat.add a b) (Init.Nat.add O O)&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-32" onmouseover="hoverTactic(&quot;5-32&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros.</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0)) (Init.Nat.add a b) (Init.Nat.add O O)&quot;, (&quot;H0 : congruent (S (S n0)) b (Init.Nat.add O O)&quot;,&quot;H : congruent (S (S n0)) a (Init.Nat.add O O)&quot;,&quot;a,b : nat&quot;,&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-33" onmouseover="hoverTactic(&quot;5-33&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply cong_plus.</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0)) a O&quot;, (&quot;H0 : congruent (S (S n0)) b (Init.Nat.add O O)&quot;,&quot;H : congruent (S (S n0)) a (Init.Nat.add O O)&quot;,&quot;a,b : nat&quot;,&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-34" onmouseover="hoverTactic(&quot;5-34&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0)) b O&quot;, (&quot;H0 : congruent (S (S n0)) b (Init.Nat.add O O)&quot;,&quot;H : congruent (S (S n0)) a (Init.Nat.add O O)&quot;,&quot;a,b : nat&quot;,&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (Init.Nat.add O O) O&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-35" onmouseover="hoverTactic(&quot;5-35&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;eq (Init.Nat.add O O) O&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;forall (x0 : nat) (_ : le x0 n0),
congruent (S (S n0))
  (Init.Nat.mul (binomial (S (S n0)) (Init.Nat.add (S O) x0))
     (Init.Nat.mul
        (power x (Init.Nat.sub (S (S n0)) (Init.Nat.add (S O) x0)))
        (power (S O) (Init.Nat.add (S O) x0)))) O&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-36" onmouseover="hoverTactic(&quot;5-36&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall (x0 : nat) (_ : le x0 n0),
congruent (S (S n0))
  (Init.Nat.mul (binomial (S (S n0)) (Init.Nat.add (S O) x0))
     (Init.Nat.mul
        (power x (Init.Nat.sub (S (S n0)) (Init.Nat.add (S O) x0)))
        (power (S O) (Init.Nat.add (S O) x0)))) O&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-37" onmouseover="hoverTactic(&quot;5-37&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros.</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0))
  (Init.Nat.mul (binomial (S (S n0)) (Init.Nat.add (S O) x0))
     (Init.Nat.mul
        (power x (Init.Nat.sub (S (S n0)) (Init.Nat.add (S O) x0)))
        (power (S O) (Init.Nat.add (S O) x0)))) O&quot;, (&quot;H : le x0 n0&quot;,&quot;x0 : nat&quot;,&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-38" onmouseover="hoverTactic(&quot;5-38&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply cong_mult_O.</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0)) (binomial (S (S n0)) (Init.Nat.add (S O) x0)) O&quot;, (&quot;H : le x0 n0&quot;,&quot;x0 : nat&quot;,&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-39" onmouseover="hoverTactic(&quot;5-39&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply cong_sym.</code><br /></span><span data-subgoals="((&quot;congruent (S (S n0)) O (binomial (S (S n0)) (Init.Nat.add (S O) x0))&quot;, (&quot;H : le x0 n0&quot;,&quot;x0 : nat&quot;,&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-40" onmouseover="hoverTactic(&quot;5-40&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply divides_cong.</code><br /></span><span data-subgoals="((&quot;divides (S (S n0)) (binomial (S (S n0)) (Init.Nat.add (S O) x0))&quot;, (&quot;H : le x0 n0&quot;,&quot;x0 : nat&quot;,&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-41" onmouseover="hoverTactic(&quot;5-41&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply p_div_bin.</code><br /></span><span data-subgoals="((&quot;prime (S (S n0))&quot;, (&quot;H : le x0 n0&quot;,&quot;x0 : nat&quot;,&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-42" onmouseover="hoverTactic(&quot;5-42&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;lt O (Init.Nat.add (S O) x0)&quot;, (&quot;H : le x0 n0&quot;,&quot;x0 : nat&quot;,&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-43" onmouseover="hoverTactic(&quot;5-43&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;lt (Init.Nat.add (S O) x0) (S (S n0))&quot;, (&quot;H : le x0 n0&quot;,&quot;x0 : nat&quot;,&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-44" onmouseover="hoverTactic(&quot;5-44&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;eq (Init.Nat.add (Init.Nat.add (power x (S (S n0))) (S O)) O)
  (Init.Nat.add (power x (S (S n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (S O)
  (Init.Nat.mul (binomial (S (S n0)) (Init.Nat.add (S O) (S n0)))
     (Init.Nat.mul
        (power x (Init.Nat.sub (S (S n0)) (Init.Nat.add (S O) (S n0))))
        (power (S O) (Init.Nat.add (S O) (S n0)))))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-45" onmouseover="hoverTactic(&quot;5-45&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;eq (S O)
  (Init.Nat.mul (binomial (S (S n0)) (Init.Nat.add (S O) (S n0)))
     (Init.Nat.mul
        (power x (Init.Nat.sub (S (S n0)) (Init.Nat.add (S O) (S n0))))
        (power (S O) (Init.Nat.add (S O) (S n0)))))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-46" onmouseover="hoverTactic(&quot;5-46&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">simpl in |- *.</code><br /></span><span data-subgoals="((&quot;eq (S O)
  (Init.Nat.mul
     (Init.Nat.add
        (Init.Nat.add (binomial n0 (S (S n0))) (binomial n0 (S n0)))
        (Init.Nat.add (binomial n0 (S n0)) (binomial n0 n0)))
     (Init.Nat.mul (power x (Init.Nat.sub n0 n0))
        (Init.Nat.add (Init.Nat.add (power (S O) n0) O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-47" onmouseover="hoverTactic(&quot;5-47&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;eq (S O)
  (Init.Nat.mul
     (Init.Nat.add
        (Init.Nat.add (binomial n0 (S (S n0))) (binomial n0 (S n0)))
        (Init.Nat.add (binomial n0 (S n0)) (binomial n0 n0)))
     (Init.Nat.mul (power x (Init.Nat.sub n0 n0))
        (Init.Nat.add (Init.Nat.add (power (S O) n0) O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-48" onmouseover="hoverTactic(&quot;5-48&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">simpl in |- *.</code><br /></span><span data-subgoals="((&quot;eq (S O)
  (Init.Nat.mul
     (Init.Nat.add
        (Init.Nat.add (binomial n0 (S (S n0))) (binomial n0 (S n0)))
        (Init.Nat.add (binomial n0 (S n0)) (binomial n0 n0)))
     (Init.Nat.mul (power x (Init.Nat.sub n0 n0))
        (Init.Nat.add (Init.Nat.add (power (S O) n0) O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-49" onmouseover="hoverTactic(&quot;5-49&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite binomial_def3.</code><br /></span><span data-subgoals="((&quot;eq (S O)
  (Init.Nat.mul
     (Init.Nat.add
        (Init.Nat.add (binomial n0 (S (S n0))) (binomial n0 (S n0)))
        (Init.Nat.add (binomial n0 (S n0)) (S O)))
     (Init.Nat.mul (power x (Init.Nat.sub n0 n0))
        (Init.Nat.add (Init.Nat.add (power (S O) n0) O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-50" onmouseover="hoverTactic(&quot;5-50&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">simpl in |- *.</code><br /></span><span data-subgoals="((&quot;eq (S O)
  (Init.Nat.mul
     (Init.Nat.add
        (Init.Nat.add (binomial n0 (S (S n0))) (binomial n0 (S n0)))
        (Init.Nat.add (binomial n0 (S n0)) (S O)))
     (Init.Nat.mul (power x (Init.Nat.sub n0 n0))
        (Init.Nat.add (Init.Nat.add (power (S O) n0) O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-51" onmouseover="hoverTactic(&quot;5-51&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;eq (S O)
  (Init.Nat.mul
     (Init.Nat.add
        (Init.Nat.add (binomial n0 (S (S n0))) (binomial n0 (S n0)))
        (Init.Nat.add (binomial n0 (S n0)) (S O)))
     (Init.Nat.mul (power x (Init.Nat.sub n0 n0))
        (Init.Nat.add (Init.Nat.add (power (S O) n0) O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-52" onmouseover="hoverTactic(&quot;5-52&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">repeat (rewrite binomial_def2; simpl in |- *; auto with arith).</code><br /></span><span data-subgoals="((&quot;eq (S O)
  (Init.Nat.add
     (Init.Nat.mul (power x (Init.Nat.sub n0 n0))
        (Init.Nat.add (Init.Nat.add (power (S O) n0) O) O)) O)&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-53" onmouseover="hoverTactic(&quot;5-53&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite &lt;- minus_n_n.</code><br /></span><span data-subgoals="((&quot;eq (S O)
  (Init.Nat.add
     (Init.Nat.mul (power x O)
        (Init.Nat.add (Init.Nat.add (power (S O) n0) O) O)) O)&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-54" onmouseover="hoverTactic(&quot;5-54&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;eq (S O)
  (Init.Nat.add
     (Init.Nat.mul (power x O)
        (Init.Nat.add (Init.Nat.add (power (S O) n0) O) O)) O)&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-55" onmouseover="hoverTactic(&quot;5-55&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite power_SO.</code><br /></span><span data-subgoals="((&quot;eq (S O)
  (Init.Nat.add
     (Init.Nat.mul (power x O) (Init.Nat.add (Init.Nat.add (S O) O) O))
     O)&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-56" onmouseover="hoverTactic(&quot;5-56&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">simpl in |- *.</code><br /></span><span data-subgoals="((&quot;eq (S O) (S O)&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)),(&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-57" onmouseover="hoverTactic(&quot;5-57&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;eq (power x (S (S n0)))
  (Init.Nat.mul (binomial (S (S n0)) O)
     (Init.Nat.mul (power x (Init.Nat.sub (S (S n0)) O))
        (power (S O) O)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-58" onmouseover="hoverTactic(&quot;5-58&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">simpl in |- *.</code><br /></span><span data-subgoals="((&quot;eq (Init.Nat.mul x (Init.Nat.mul x (power x n0)))
  (Init.Nat.add
     (Init.Nat.mul (Init.Nat.mul x (Init.Nat.mul x (power x n0))) (S O))
     O)&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-59" onmouseover="hoverTactic(&quot;5-59&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;eq (Init.Nat.mul x (Init.Nat.mul x (power x n0)))
  (Init.Nat.add
     (Init.Nat.mul (Init.Nat.mul x (Init.Nat.mul x (power x n0))) (S O))
     O)&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-60" onmouseover="hoverTactic(&quot;5-60&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite &lt;- plus_n_O.</code><br /></span><span data-subgoals="((&quot;eq (Init.Nat.mul x (Init.Nat.mul x (power x n0)))
  (Init.Nat.mul (Init.Nat.mul x (Init.Nat.mul x (power x n0))) (S O))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-61" onmouseover="hoverTactic(&quot;5-61&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite mult_1_r.</code><br /></span><span data-subgoals="((&quot;eq (Init.Nat.mul x (Init.Nat.mul x (power x n0)))
  (Init.Nat.mul x (Init.Nat.mul x (power x n0)))&quot;, (&quot;H' : prime (S (S n0))&quot;,&quot;x,p,n,n0 : nat&quot;)))" id="command-5-62" onmouseover="hoverTactic(&quot;5-62&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="()" id="command-5-63" onmouseover="hoverTactic(&quot;5-63&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">Qed.</code><br /></span></div></div><button class="collapsible okay" onmouseover="hoverLemma(&quot;FermatZdFermat2&quot;)" onmouseout="unhoverLemma(&quot;FermatZdFermat2&quot;)"><code class="buttontext">Lemma Fermat2 : forall x p : nat, prime p -&gt; congruent p (power x p) x.</code></button><div class="region"><div class="predicted"><span data-subgoals="((&quot;forall (x p : nat) (_ : prime p), congruent p (power x p) x&quot;, (&quot;&quot;)))" id="command-7-0" onmouseover="hoverTactic(&quot;7-0&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">Proof.</code><br /></span><span data-subgoals="((&quot;forall (x p : nat) (_ : prime p), congruent p (power x p) x&quot;, (&quot;&quot;)))" id="command-7-1" onmouseover="hoverTactic(&quot;7-1&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">Admitted.</code><br /></span></div><div class="original"><span data-subgoals="((&quot;forall (x p : nat) (_ : prime p), congruent p (power x p) x&quot;, (&quot;&quot;)))" id="command-7-0" onmouseover="hoverTactic(&quot;7-0&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">Proof.</code><br /></span><span data-subgoals="((&quot;forall (x p : nat) (_ : prime p), congruent p (power x p) x&quot;, (&quot;&quot;)))" id="command-7-1" onmouseover="hoverTactic(&quot;7-1&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros x.</code><br /></span><span data-subgoals="((&quot;forall (p : nat) (_ : prime p), congruent p (power x p) x&quot;, (&quot;x : nat&quot;)))" id="command-7-2" onmouseover="hoverTactic(&quot;7-2&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">elim x.</code><br /></span><span data-subgoals="((&quot;forall (p : nat) (_ : prime p), congruent p (power O p) O&quot;, (&quot;x : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (p : nat) (_ : prime p), congruent p (power n p) n)
  (p : nat) (_ : prime p), congruent p (power (S n) p) (S n)&quot;, (&quot;x : nat&quot;)))" id="command-7-3" onmouseover="hoverTactic(&quot;7-3&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall (p : nat) (_ : prime p), congruent p (power O p) O&quot;, (&quot;x : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (p : nat) (_ : prime p), congruent p (power n p) n)
  (p : nat) (_ : prime p), congruent p (power (S n) p) (S n)&quot;, (&quot;x : nat&quot;)))" id="command-7-4" onmouseover="hoverTactic(&quot;7-4&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros p.</code><br /></span><span data-subgoals="((&quot;forall _ : prime p, congruent p (power O p) O&quot;, (&quot;x,p : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (p : nat) (_ : prime p), congruent p (power n p) n)
  (p : nat) (_ : prime p), congruent p (power (S n) p) (S n)&quot;, (&quot;x : nat&quot;)))" id="command-7-5" onmouseover="hoverTactic(&quot;7-5&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">case p.</code><br /></span><span data-subgoals="((&quot;forall _ : prime O, congruent O (power O O) O&quot;, (&quot;x,p : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (p : nat) (_ : prime p), congruent p (power n p) n)
  (p : nat) (_ : prime p), congruent p (power (S n) p) (S n)&quot;, (&quot;x : nat&quot;)))" id="command-7-6" onmouseover="hoverTactic(&quot;7-6&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">simpl in |- *.</code><br /></span><span data-subgoals="((&quot;forall _ : prime O, congruent O (S O) O&quot;, (&quot;x,p : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (p : nat) (_ : prime p), congruent p (power n p) n)
  (p : nat) (_ : prime p), congruent p (power (S n) p) (S n)&quot;, (&quot;x : nat&quot;)))" id="command-7-7" onmouseover="hoverTactic(&quot;7-7&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall _ : prime O, congruent O (S O) O&quot;, (&quot;x,p : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (p : nat) (_ : prime p), congruent p (power n p) n)
  (p : nat) (_ : prime p), congruent p (power (S n) p) (S n)&quot;, (&quot;x : nat&quot;)))" id="command-7-8" onmouseover="hoverTactic(&quot;7-8&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros H'.</code><br /></span><span data-subgoals="((&quot;congruent O (S O) O&quot;, (&quot;H' : prime O&quot;,&quot;x,p : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (p : nat) (_ : prime p), congruent p (power n p) n)
  (p : nat) (_ : prime p), congruent p (power (S n) p) (S n)&quot;, (&quot;x : nat&quot;)))" id="command-7-9" onmouseover="hoverTactic(&quot;7-9&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">absurd (prime 0).</code><br /></span><span data-subgoals="((&quot;not (prime O)&quot;, (&quot;H' : prime O&quot;,&quot;x,p : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (p : nat) (_ : prime p), congruent p (power n p) n)
  (p : nat) (_ : prime p), congruent p (power (S n) p) (S n)&quot;, (&quot;x : nat&quot;)))" id="command-7-10" onmouseover="hoverTactic(&quot;7-10&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;prime O&quot;, (&quot;H' : prime O&quot;,&quot;x,p : nat&quot;)),(&quot;forall (n : nat) (_ : prime (S n)), congruent (S n) (power O (S n)) O&quot;, (&quot;x,p : nat&quot;)))" id="command-7-11" onmouseover="hoverTactic(&quot;7-11&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall (n : nat) (_ : prime (S n)), congruent (S n) (power O (S n)) O&quot;, (&quot;x,p : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (p : nat) (_ : prime p), congruent p (power n p) n)
  (p : nat) (_ : prime p), congruent p (power (S n) p) (S n)&quot;, (&quot;x : nat&quot;)))" id="command-7-12" onmouseover="hoverTactic(&quot;7-12&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">simpl in |- *.</code><br /></span><span data-subgoals="((&quot;forall (n : nat) (_ : prime (S n)), congruent (S n) O O&quot;, (&quot;x,p : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (p : nat) (_ : prime p), congruent p (power n p) n)
  (p : nat) (_ : prime p), congruent p (power (S n) p) (S n)&quot;, (&quot;x : nat&quot;)))" id="command-7-13" onmouseover="hoverTactic(&quot;7-13&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall (n : nat) (_ : prime (S n)), congruent (S n) O O&quot;, (&quot;x,p : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (p : nat) (_ : prime p), congruent p (power n p) n)
  (p : nat) (_ : prime p), congruent p (power (S n) p) (S n)&quot;, (&quot;x : nat&quot;)))" id="command-7-14" onmouseover="hoverTactic(&quot;7-14&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros n H'.</code><br /></span><span data-subgoals="((&quot;congruent (S n) O O&quot;, (&quot;H' : prime (S n)&quot;,&quot;x,p,n : nat&quot;)),(&quot;forall (n : nat)
  (_ : forall (p : nat) (_ : prime p), congruent p (power n p) n)
  (p : nat) (_ : prime p), congruent p (power (S n) p) (S n)&quot;, (&quot;x : nat&quot;)))" id="command-7-15" onmouseover="hoverTactic(&quot;7-15&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply cong_ref.</code><br /></span><span data-subgoals="((&quot;forall (n : nat)
  (_ : forall (p : nat) (_ : prime p), congruent p (power n p) n)
  (p : nat) (_ : prime p), congruent p (power (S n) p) (S n)&quot;, (&quot;x : nat&quot;)))" id="command-7-16" onmouseover="hoverTactic(&quot;7-16&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;forall (n : nat)
  (_ : forall (p : nat) (_ : prime p), congruent p (power n p) n)
  (p : nat) (_ : prime p), congruent p (power (S n) p) (S n)&quot;, (&quot;x : nat&quot;)))" id="command-7-17" onmouseover="hoverTactic(&quot;7-17&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">intros n H' p H'0.</code><br /></span><span data-subgoals="((&quot;congruent p (power (S n) p) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-18" onmouseover="hoverTactic(&quot;7-18&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply (cong_trans p) with (b := power n p + 1).</code><br /></span><span data-subgoals="((&quot;congruent p (power (S n) p) (Init.Nat.add (power n p) (S O))&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)),(&quot;congruent p (Init.Nat.add (power n p) (S O)) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-19" onmouseover="hoverTactic(&quot;7-19&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">replace (S n) with (n + 1).</code><br /></span><span data-subgoals="((&quot;congruent p (power (Init.Nat.add n (S O)) p)
  (Init.Nat.add (power n p) (S O))&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)),(&quot;congruent p (Init.Nat.add (power n p) (S O)) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-20" onmouseover="hoverTactic(&quot;7-20&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;congruent p (power (Init.Nat.add n (S O)) p)
  (Init.Nat.add (power n p) (S O))&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)),(&quot;congruent p (Init.Nat.add (power n p) (S O)) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-21" onmouseover="hoverTactic(&quot;7-21&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply Fermat1.</code><br /></span><span data-subgoals="((&quot;prime p&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)),(&quot;congruent p (Init.Nat.add (power n p) (S O)) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-22" onmouseover="hoverTactic(&quot;7-22&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;eq (Init.Nat.add n (S O)) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)),(&quot;congruent p (Init.Nat.add (power n p) (S O)) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-23" onmouseover="hoverTactic(&quot;7-23&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto with arith.</code><br /></span><span data-subgoals="((&quot;eq (Init.Nat.add n (S O)) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)),(&quot;congruent p (Init.Nat.add (power n p) (S O)) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-24" onmouseover="hoverTactic(&quot;7-24&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite plus_comm.</code><br /></span><span data-subgoals="((&quot;eq (Nat.add (S O) n) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)),(&quot;congruent p (Init.Nat.add (power n p) (S O)) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-25" onmouseover="hoverTactic(&quot;7-25&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">simpl in |- *.</code><br /></span><span data-subgoals="((&quot;eq (S n) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)),(&quot;congruent p (Init.Nat.add (power n p) (S O)) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-26" onmouseover="hoverTactic(&quot;7-26&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;congruent p (Init.Nat.add (power n p) (S O)) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-27" onmouseover="hoverTactic(&quot;7-27&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">replace (S n) with (n + 1).</code><br /></span><span data-subgoals="((&quot;congruent p (Init.Nat.add (power n p) (S O)) (Init.Nat.add n (S O))&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)),(&quot;eq (Init.Nat.add n (S O)) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-28" onmouseover="hoverTactic(&quot;7-28&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply cong_plus.</code><br /></span><span data-subgoals="((&quot;congruent p (power n p) n&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)),(&quot;eq (Init.Nat.add n (S O)) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-29" onmouseover="hoverTactic(&quot;7-29&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;congruent p (S O) (S O)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)),(&quot;eq (Init.Nat.add n (S O)) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-30" onmouseover="hoverTactic(&quot;7-30&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="((&quot;congruent p (S O) (S O)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)),(&quot;eq (Init.Nat.add n (S O)) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-31" onmouseover="hoverTactic(&quot;7-31&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">apply cong_ref.</code><br /></span><span data-subgoals="((&quot;eq (Init.Nat.add n (S O)) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-32" onmouseover="hoverTactic(&quot;7-32&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">rewrite plus_comm.</code><br /></span><span data-subgoals="((&quot;eq (Nat.add (S O) n) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-33" onmouseover="hoverTactic(&quot;7-33&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">simpl in |- *.</code><br /></span><span data-subgoals="((&quot;eq (S n) (S n)&quot;, (&quot;H'0 : prime p&quot;,&quot;p : nat&quot;,&quot;H' : forall (p : nat) (_ : prime p), congruent p (power n p) n&quot;,&quot;x,n : nat&quot;)))" id="command-7-34" onmouseover="hoverTactic(&quot;7-34&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">auto.</code><br /></span><span data-subgoals="()" id="command-7-35" onmouseover="hoverTactic(&quot;7-35&quot;)" onmouseout="unhoverTactic()"><code class="plaincommand">Qed.</code><br /></span></div></div></pre></body></html>